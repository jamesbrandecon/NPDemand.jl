<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Function Documentation · NPDemand</title><meta name="title" content="Function Documentation · NPDemand"/><meta property="og:title" content="Function Documentation · NPDemand"/><meta property="twitter:title" content="Function Documentation · NPDemand"/><meta name="description" content="Documentation for NPDemand."/><meta property="og:description" content="Documentation for NPDemand."/><meta property="twitter:description" content="Documentation for NPDemand."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">NPDemand</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">NPDemand.jl</a></li><li><span class="tocitem">Implementation Details</span><ul><li><a class="tocitem" href="../details/">Setup and GMM</a></li><li><a class="tocitem" href="../priors/">Quasibayes: Priors and Sampling</a></li><li><a class="tocitem" href="../constraints/">Constraints and SMC</a></li></ul></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../usage/">Basic Usage (GMM)</a></li><li><a class="tocitem" href="../quasibayes_usage/">Using Quasi-Bayes Tools</a></li></ul></li><li><a class="tocitem" href="../postestimation/">Post-Estimation</a></li><li class="is-active"><a class="tocitem" href>Function Documentation</a><ul class="internal"><li><a class="tocitem" href="#Problem-construction-and-manipulation"><span>Problem construction and manipulation</span></a></li><li><a class="tocitem" href="#Estimation"><span>Estimation</span></a></li><li><a class="tocitem" href="#Post-estimation-tools"><span>Post-estimation tools</span></a></li><li><a class="tocitem" href="#Back-end-functions"><span>Back-end functions</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Function Documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Function Documentation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jamesbrandecon/NPDemand.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/master/docs/src/functions.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Function-documentation"><a class="docs-heading-anchor" href="#Function-documentation">Function documentation</a><a id="Function-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Function-documentation" title="Permalink"></a></h1><h2 id="Problem-construction-and-manipulation"><a class="docs-heading-anchor" href="#Problem-construction-and-manipulation">Problem construction and manipulation</a><a id="Problem-construction-and-manipulation-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-construction-and-manipulation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.define_problem" href="#NPDemand.define_problem"><code>NPDemand.define_problem</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">define_problem(df::DataFrame; exchange = [], index_vars = [&quot;prices&quot;], FE = [], constraints = [], bO = 2, tol = 1e-5)</code></pre><p>Constructs a <code>problem</code>::NPDProblem using the provided problem characteristics. Inputs: </p><ul><li><code>exchange</code>: A vector of groups of products which are exchangeable. E.g., with 4 goods, if the first</li></ul><p>and second are exchangeable and so are the third and fourth, set <code>exchange</code> = [[1 2], [3 4]].</p><ul><li><code>index_vars</code>: String array listing column names in <code>df</code> which represent variables that enter the inverted index.<ul><li>&quot;prices&quot; must be the first element of <code>index_vars</code></li></ul></li><li><code>FE</code>: String array listing column names in <code>df</code> which should be included as fixed effects.<ul><li>Note: All fixed effects are estimated as parameters by the minimizer, so be careful adding fixed effects for variables that take many values.</li></ul></li><li><code>bO</code>: Order of the univariate Bernstein polynomials in market shares. Default is 2.</li><li><code>constraint_tol</code>: Tolerance specifying tightness of constraints</li><li><code>chunk_size</code>: Controls chunk size in ForwardDiff.Gradient autodiff calculation for nonlinear constraints. Only used if :subs_in_group specified. </li><li><code>constraints</code>: A list of symbols of accepted constraints. Currently supported constraints are: <ul><li>:monotone  </li><li>:all_substitutes </li><li>:diagonal_dominance_group </li><li>:diagonal_dominance_all </li><li>:subs_in_group (Note: this constraint is the only available nonlinear constraint and will slow down estimation considerably)</li></ul></li><li><code>verbose</code>: if <code>false</code>, will not print updates as problem is generated</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/define_problem.jl#L21-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.update_constraints!" href="#NPDemand.update_constraints!"><code>NPDemand.update_constraints!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_constraints!(problem::NPDProblem, new_constraints::Vector{Symbol})</code></pre><p>Re-calculates constraint matrices under <code>new_constraints</code>, ignoring previous constraints used to define the problem. The <code>exchangeability</code> constraint is an exception. To change anything about the structure of exchangeability for the problem changes, define a new problem.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/define_problem.jl#L305-L310">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.list_constraints" href="#NPDemand.list_constraints"><code>NPDemand.list_constraints</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_constraints()</code></pre><p>Returns a dictionary of constraints supported by the <code>define_problem</code> function in the NPDemand package. Each constraint is represented by a symbol and its corresponding description.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/define_problem.jl#L1-L5">source</a></section></article><h2 id="Estimation"><a class="docs-heading-anchor" href="#Estimation">Estimation</a><a id="Estimation-1"></a><a class="docs-heading-anchor-permalink" href="#Estimation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.estimate!" href="#NPDemand.estimate!"><code>NPDemand.estimate!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">estimate!(problem::NPDProblem;
    verbose = true,
    linear_solver = &quot;Ipopt&quot;, 
    quasi_bayes = false,
    sampler = [], 
    n_samples::Int = 50_000,
    burn_in::Real = 0.25, 
    skip::Int = 5,
    n_attempts = 0,
    penalty = Inf, 
    step::Union{Real, Symbol} = 0.01)</code></pre><p>Estimates the problem using the specified parameters.</p><p><strong>Arguments</strong></p><ul><li><code>problem::NPDProblem</code>: The problem to be estimated.</li><li><code>verbose::Bool</code>: Whether to print verbose output. Default is <code>true</code>.</li><li><code>linear_solver::String</code>: The linear solver to use. Must be either &quot;Ipopt&quot; or &quot;OSQP&quot;. Default is &quot;Ipopt&quot;.</li><li><code>quasi_bayes::Bool</code>: Whether to use quasi-bayes sampling. Default is <code>false</code>.</li><li><code>sampler</code>: The sampler to use for quasi-bayes sampling. Default is an empty array.</li><li><code>n_samples::Int</code>: The number of samples to draw. Default is 50,000.</li><li><code>burn_in::Real</code>: The fraction of samples to drop as burn-in. Must be less than 1. Default is 0.25.</li><li><code>skip::Int</code>: The number of samples to skip between saved samples. Default is 5.</li><li><code>n_attempts</code>: The number of attempts to find a valid starting point for the sampler. Default is 0.</li><li><code>penalty</code>: The penalty value for the objective function. Default is <code>Inf</code>.</li><li><code>step::Union{Real, Symbol}</code>: The step size for the sampler. Can be a real number or the symbol <code>:auto</code> to automatically calculate the step size. Default is 0.01.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/estimate.jl#L144-L172">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.smc!" href="#NPDemand.smc!"><code>NPDemand.smc!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">smc!(problem::NPDemand.NPDProblem;
    grid_points::Int    = 50, 
    max_penalty::Real   = 5, 
    ess_threshold::Real = 100, 
    step::Real          = 0.1, 
    skip::Int           = 5,
    burn_in::Real       = 0.25, 
    mh_steps            = max(5, floor(size(problem.results.filtered_chain, 2))/10),
    seed                = 4132,
    smc_method          = :adaptive,
    max_iter            = 1000,
    adaptive_tolerance  = false, 
    max_violations      = 0.01)</code></pre><p>Run sequentially constrained Monte Carlo (SMC) on the problem.</p><p><strong>Arguments</strong></p><ul><li><code>problem::NPDemand.NPDProblem</code>: The problem object on which SMC will be run.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>grid_points::Int</code>: The number of grid points for the SMC grid. Default is 50.</li><li><code>max_penalty::Real</code>: The maximum penalty value for the SMC algorithm. Default is 5.</li><li><code>ess_threshold::Real</code>: The effective sample size threshold for the SMC algorithm. Default is 100.</li><li><code>step::Real</code>: The step size for the SMC algorithm. Default is 0.1.</li><li><code>skip::Int</code>: The thinning factor for the SMC chain. Default is 5.</li><li><code>burn_in::Real</code>: The fraction of samples to be discarded as burn-in. Default is 0.25.</li><li><code>mh_steps</code>: The number of Metropolis-Hastings steps per iteration. Default is calculated based on the size of the filtered chain.</li><li><code>seed</code>: The random seed for the SMC algorithm. Default is 4132.</li><li><code>smc_method</code>: The method for choosing the SMC grid. Default is :adaptive.</li><li><code>max_iter</code>: The maximum number of iterations for the SMC algorithm. Default is 1000.</li><li><code>adaptive_tolerance</code>: Whether to use adaptive tolerance for the SMC algorithm. Default is false.</li><li><code>max_violations</code>: The maximum allowed fraction of markets with violations. Default is 0.01.</li></ul><p>The function will overwrite the results in the problem object with the resulting chain.</p><p>For harder or slower problems, it may be necessary to increase the number of Metropolis-Hastings steps per iteration (<code>mh_steps</code>), the number of iterations (<code>max_iter</code>), or the maximum allowed fraction markets with violations (<code>max_violations</code>).</p><p><code>burn_in</code> and <code>skip</code> control the number of samples to drop and the thinning of the chain, respectively.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/estimate.jl#L336-L375">source</a></section></article><h2 id="Post-estimation-tools"><a class="docs-heading-anchor" href="#Post-estimation-tools">Post-estimation tools</a><a id="Post-estimation-tools-1"></a><a class="docs-heading-anchor-permalink" href="#Post-estimation-tools" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.price_elasticities!" href="#NPDemand.price_elasticities!"><code>NPDemand.price_elasticities!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">price_elasticities!(problem; 
    CI::Union{Vector{Any}, Real} = [], 
    n_draws::Union{Vector{Any}, Int} = [])</code></pre><p>Takes the solved <code>problem</code> as first argument, a <code>DataFrame</code> as the second argument, and evaluates all price elasticities in-sample.  Currently does not calculate out-of-sample price elasticities. For this, use the function <code>compute_demand_function!</code>. </p><p>Results of this function are stored as a <code>DataFrame</code> in problem.all<em>elasticities. Results can be summarized by hand or using the `summarize</em>elasticities` function.  We also store the Jacobian of the demand function with respect to prices, which can be used to calculate other quantities of interest.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/price_elasticity.jl#L1-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.elasticity_quantiles" href="#NPDemand.elasticity_quantiles"><code>NPDemand.elasticity_quantiles</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">elasticity_quantiles(problem::NPDProblem, ind1::Int, ind2::Int; 
    quantiles = collect(0.01:0.01:0.99),
    n_draws::Int = 100)</code></pre><p>Convenience function for calculating quantiles of price elasticities. <code>problem</code> should be a solved <code>NPDProblem</code> after running <code>price_elasticities!</code>. <code>ind1</code> and <code>ind2</code> are the indices of the products for which you want to calculate the quantiles. E.g., ind1=1, ind2=1 returns quantiles of the own-price elasticity for product 1.  The user can control the set of quantiles to return and the number of draws (<code>n_draws</code>) to use in the posterior integration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/price_elasticity.jl#L375-L384">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.report_constraint_violations" href="#NPDemand.report_constraint_violations"><code>NPDemand.report_constraint_violations</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">report_constraint_violations(problem;
    verbose = true,
    params = [],
    output = &quot;dict&quot;,
    n_draws::Int = 0)</code></pre><p>This function reports the constraint violations for a given problem.</p><p><strong>Arguments</strong></p><ul><li><code>problem</code>: The problem for which constraint violations need to be reported.</li><li><code>verbose</code>: A boolean indicating whether to print verbose output. Default is <code>true</code>.</li><li><code>params</code>: An optional parameter vector. If not provided, the function uses the GMM result if there&#39;s no chain, or the filtered chain if available. Default is <code>[]</code>.</li><li><code>output</code>: The output format for the violations. Default is <code>&quot;dict&quot;</code>.</li><li><code>n_draws</code>: The number of draws to use from the filtered chain. Default is <code>0</code>.</li></ul><p><strong>Returns</strong></p><ul><li><code>violations</code>: A dictionary or a single violation value, depending on the <code>output</code> parameter.</li></ul><p><strong>Example output:</strong></p><pre><code class="language-julia hljs">Dict{Symbol, Float64} with 8 entries:
  :monotone               =&gt; 0.0
  :all_substitutes        =&gt; 0.0
  :diagonal_dominance_all =&gt; 0.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/constraint_checks.jl#L1-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.compute_demand_function!" href="#NPDemand.compute_demand_function!"><code>NPDemand.compute_demand_function!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_demand_function!(problem, df; max_iter = 1000, show_trace = false)</code></pre><p><code>compute_demand_function!</code> estimates the demand function/curve using NPD estimates calculated via estimate!.</p><p>The function takes in an estimated problem::NPDProblem and a dataframe with counterfactual values of the  covariates in the utility function. One must specify all fields that were used in estimation (including shares). The function will change the values of df[!,r&quot;shares&quot;] to take on the value of the estimated demand function.</p><p>Options: </p><ul><li><code>max_iter</code>: controls the number of iterations for the nonlinear solver calculating market shares. Default is 1000 but well-estimated problems should converge faster.</li><li><code>show_trace</code>: if <code>true</code>, Optim will print the trace for each iteration of the nonlinear solver. </li><li><code>compute_own_elasticities</code>: NOT yet implemented– if <code>true</code>, will also generate columns called <code>own_elast</code> which will include estimated own-price elasticities at all counterfactual points.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/compute_demand_function.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.summarize_elasticities" href="#NPDemand.summarize_elasticities"><code>NPDemand.summarize_elasticities</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">summarize_elasticities(problem::NPDProblem, which_elasticities::String, stat::String; 
    q = [],
    integrate = false,
    n_draws::Int = 100,
    CI::Real = 0.95)</code></pre><p>Convenience function for summarizing price elasticities. <code>problem</code> should be a solved <code>NPDProblem</code> after running <code>price_elasticities!</code>.  <code>stat</code> should be in [&quot;mean&quot;, &quot;quantile&quot;], and if <code>stat</code>==&quot;quantile&quot;, the option <code>q</code> should include the quantile of interest (e.g., 0.75 for the 75th percentile price elasticities).</p><p>When a problem has been estimated via quasi-Bayesian methods, the function can integrate over the posterior distribution of the parameters to provide a posterior distribution of the summarized value.  <code>n_draws</code> controls the number of draws from the posterior to use in the integration, and <code>CI</code> controls the with of the credible interval to use in the integration (0.95 for a 95% credible interval).</p><p>Output is a NamedTuple: (;Statistic, Posterior<em>Mean, Posterior</em>Median, Posterior_CI)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/price_elasticity.jl#L210-L224">source</a></section></article><h2 id="Back-end-functions"><a class="docs-heading-anchor" href="#Back-end-functions">Back-end functions</a><a id="Back-end-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Back-end-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.NPD_parameters" href="#NPDemand.NPD_parameters"><code>NPDemand.NPD_parameters</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NPD_parameters

Custom struct to store estimated parameters specifically. This can be used to replace the candidate parameters in an NPDProblem struct. The two key fields 
are `minimizer` and `filtered_chain`. The `minimizer` field stores the estimated parameters, while the `filtered_chain` field stores the Markov chain for quasi-Bayes
methods, after filtering out burn-in and thinning but before reformatting into the full parameter sieve.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/define_problem.jl#L256-L262">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.simulate_logit" href="#NPDemand.simulate_logit"><code>NPDemand.simulate_logit</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">simulate_logit(J,T, beta, v)</code></pre><p>Simulates logit demand for <code>J</code> products in <code>T</code> markets, with price preference parameter <code>beta</code> and market shocks with standard deviation <code>v</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/simulate_logit.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.toDataFrame" href="#NPDemand.toDataFrame"><code>NPDemand.toDataFrame</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">toDataFrame(s::Matrix, p::Matrix, z::Matrix, x::Matrix = zeros(size(s)))</code></pre><p>Converts the results of <code>simulate_logit</code> to a DataFrame with column names that can be processed by NPDemand.jl</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/toDataFrame.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.bern" href="#NPDemand.bern"><code>NPDemand.bern</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">bern(t, order)</code></pre><p>Returns a univariate Bernstein polynomial of order <code>order</code> constructed from array/matrix <code>t</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/bern.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NPDemand.dbern" href="#NPDemand.dbern"><code>NPDemand.dbern</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dbern(t, order)</code></pre><p>Returns the derivative of a univariate Bernstein polynomial of order <code>order</code> constructed from array/matrix <code>t</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jamesbrandecon/NPDemand.jl/blob/6bd2b438721fb3d8c64d5d6cc64b5cb17af4c0f6/src/dbern.jl#L1-L5">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../postestimation/">« Post-Estimation</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Friday 10 January 2025 04:40">Friday 10 January 2025</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
